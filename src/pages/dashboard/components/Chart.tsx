import { ApexOptions } from "apexcharts";
import classNames from "classnames";
import { useState } from "react";
import { default as ApexChart } from "react-apexcharts";

export const Chart = () => {
  const periods: { name: string; value: string }[] = [
    { name: "All", value: "all" },
    { name: "1M", value: "1m" },
    { name: "6M", value: "6m" },
    { name: "1Y", value: "1y" },
    { name: "YTD", value: "ytd" },
  ];
  const series = [
    {
      name: "",
      data: [
        [1627359600000, 30.95],
        [1627446000000, 31.34],
        [1627532400000, 31.18],
        [1627618800000, 31.05],
        [1627878000000, 31.0],
        [1627964400000, 30.95],
        [1628050800000, 31.24],
        [1628137200000, 31.29],
        [1628223600000, 31.85],
        [1628482800000, 31.86],
        [1628569200000, 32.28],
        [1628655600000, 32.1],
        [1628742000000, 32.65],
        [1628828400000, 32.21],
        [1629087600000, 32.35],
        [1629174000000, 32.44],
        [1629260400000, 32.46],
        [1629346800000, 32.86],
        [1629433200000, 32.75],
        [1629778800000, 32.54],
        [1629865200000, 32.33],
        [1629951600000, 32.97],
        [1630038000000, 33.41],
        [1630297200000, 33.27],
        [1630383600000, 33.27],
        [1630470000000, 32.89],
        [1630556400000, 33.1],
        [1630642800000, 33.73],
        [1630902000000, 33.22],
        [1630988400000, 31.99],
        [1631074800000, 32.41],
        [1631161200000, 33.05],
        [1631247600000, 33.64],
        [1631506800000, 33.56],
        [1631593200000, 34.22],
        [1631679600000, 33.77],
        [1631766000000, 34.17],
        [1631852400000, 33.82],
        [1632111600000, 34.51],
        [1632198000000, 33.16],
        [1632284400000, 33.56],
        [1632370800000, 33.71],
        [1632457200000, 33.81],
        [1632712800000, 34.4],
        [1632799200000, 34.63],
        [1632885600000, 34.46],
        [1632972000000, 34.48],
        [1633058400000, 34.31],
        [1633317600000, 34.7],
        [1633404000000, 34.31],
        [1633490400000, 33.46],
        [1633576800000, 33.59],
        [1633922400000, 33.22],
        [1634008800000, 32.61],
        [1634095200000, 33.01],
        [1634181600000, 33.55],
        [1634268000000, 33.18],
        [1634527200000, 32.84],
        [1634613600000, 33.84],
        [1634700000000, 33.39],
        [1634786400000, 32.91],
        [1634872800000, 33.06],
        [1635132000000, 32.62],
        [1635218400000, 32.4],
        [1635304800000, 33.13],
        [1635391200000, 33.26],
        [1635477600000, 33.58],
        [1635736800000, 33.55],
        [1635823200000, 33.77],
        [1635909600000, 33.76],
        [1635996000000, 33.32],
        [1636082400000, 32.61],
        [1636341600000, 32.52],
        [1636428000000, 32.67],
        [1636514400000, 32.52],
        [1636600800000, 31.92],
        [1636687200000, 32.2],
        [1636946400000, 32.23],
        [1637032800000, 32.33],
        [1637119200000, 32.36],
        [1637205600000, 32.01],
        [1637292000000, 31.31],
        [1637551200000, 32.01],
        [1637637600000, 32.01],
        [1637724000000, 32.18],
        [1637810400000, 31.54],
        [1637896800000, 31.6],
        [1638242400000, 32.05],
        [1638328800000, 31.29],
        [1638415200000, 31.05],
        [1638501600000, 29.82],
        [1638760800000, 30.31],
        [1638847200000, 30.7],
        [1638933600000, 31.69],
        [1639020000000, 31.32],
        [1639106400000, 31.65],
        [1639365600000, 31.13],
        [1639452000000, 31.77],
        [1639538400000, 31.79],
        [1639624800000, 31.67],
        [1639711200000, 32.39],
        [1639970400000, 32.63],
        [1640056800000, 32.89],
        [1640143200000, 31.99],
        [1640229600000, 31.23],
        [1640316000000, 31.57],
        [1640575200000, 30.84],
        [1640661600000, 31.07],
        [1640748000000, 31.41],
        [1640834400000, 31.17],
        [1640920800000, 32.37],
        [1641180000000, 32.19],
        [1641266400000, 32.51],
        [1641439200000, 32.53],
        [1641525600000, 31.37],
        [1641784800000, 30.43],
        [1641871200000, 30.44],
        [1641957600000, 30.2],
        [1642044000000, 30.14],
        [1642130400000, 30.65],
        [1642389600000, 30.4],
        [1642476000000, 30.65],
        [1642562400000, 31.43],
        [1642648800000, 31.89],
        [1642735200000, 31.38],
        [1642994400000, 30.64],
        [1643080800000, 30.02],
        [1643167200000, 30.33],
        [1643253600000, 30.95],
        [1643340000000, 31.89],
        [1643599200000, 31.01],
        [1643685600000, 30.88],
        [1643772000000, 30.69],
        [1643858400000, 30.58],
        [1643944800000, 32.02],
        [1644204000000, 32.14],
        [1644290400000, 32.37],
        [1644376800000, 32.51],
        [1644463200000, 32.65],
        [1644549600000, 32.64],
        [1644808800000, 32.27],
        [1644895200000, 32.1],
        [1644981600000, 32.91],
        [1645068000000, 33.65],
        [1645154400000, 33.8],
        [1645413600000, 33.92],
        [1645500000000, 33.75],
        [1645586400000, 33.84],
        [1645672800000, 33.5],
        [1645759200000, 32.26],
        [1646018400000, 32.32],
        [1646104800000, 32.06],
        [1646191200000, 31.96],
        [1646277600000, 31.46],
        [1646364000000, 31.27],
        [1646709600000, 31.43],
        [1646796000000, 32.26],
        [1646882400000, 32.79],
        [1646968800000, 32.46],
        [1647228000000, 32.13],
        [1647314400000, 32.43],
        [1647400800000, 32.42],
        [1647487200000, 32.81],
        [1647573600000, 33.34],
        [1647832800000, 33.41],
        [1647919200000, 32.57],
        [1648005600000, 33.12],
        [1648092000000, 34.53],
        [1648178400000, 33.83],
        [1648437600000, 33.41],
        [1648524000000, 32.9],
        [1648610400000, 32.53],
        [1648696800000, 32.8],
        [1648783200000, 32.44],
        [1649042400000, 32.62],
        [1649128800000, 32.57],
        [1649215200000, 32.6],
        [1649301600000, 32.68],
        [1649388000000, 32.47],
        [1649647200000, 32.23],
        [1649733600000, 31.68],
        [1649820000000, 31.51],
        [1649906400000, 31.78],
        [1649992800000, 31.94],
        [1650252000000, 32.33],
        [1650338400000, 33.24],
        [1650424800000, 33.44],
        [1650511200000, 33.48],
        [1650597600000, 33.24],
        [1650856800000, 33.49],
        [1650943200000, 33.31],
        [1651029600000, 33.36],
        [1651116000000, 33.4],
        [1651202400000, 34.01],
        [1651638000000, 34.02],
        [1651724400000, 34.36],
        [1651810800000, 34.39],
        [1652070000000, 34.24],
        [1652156400000, 34.39],
        [1652242800000, 33.47],
        [1652329200000, 32.98],
        [1652415600000, 32.9],
        [1652674800000, 32.7],
        [1652761200000, 32.54],
        [1652847600000, 32.23],
        [1652934000000, 32.64],
        [1653020400000, 32.65],
        [1653279600000, 32.92],
        [1653366000000, 32.64],
        [1653452400000, 32.84],
        [1653625200000, 33.4],
        [1653884400000, 33.3],
        [1653970800000, 33.18],
        [1654057200000, 33.88],
        [1654143600000, 34.09],
        [1654230000000, 34.61],
        [1654489200000, 34.7],
        [1654575600000, 35.3],
        [1654662000000, 35.4],
        [1654748400000, 35.14],
        [1654834800000, 35.48],
        [1655094000000, 35.75],
        [1655180400000, 35.54],
        [1655266800000, 35.96],
        [1655353200000, 35.53],
        [1655439600000, 37.56],
        [1655698800000, 37.42],
        [1655785200000, 37.49],
        [1655871600000, 38.09],
        [1655958000000, 37.87],
        [1656044400000, 37.71],
        [1656303600000, 37.53],
        [1656476400000, 37.55],
        [1656562800000, 37.3],
        [1656649200000, 36.9],
        [1656908400000, 37.68],
        [1657081200000, 38.34],
        [1657167600000, 37.75],
        [1657254000000, 38.13],
        [1657513200000, 37.94],
        [1657599600000, 38.14],
        [1657686000000, 38.66],
        [1657772400000, 38.62],
        [1657858800000, 38.09],
        [1658118000000, 38.16],
        [1658204400000, 38.15],
        [1658290800000, 37.88],
        [1658377200000, 37.73],
        [1658463600000, 37.98],
        [1658809200000, 37.95],
        [1658895600000, 38.25],
        [1658982000000, 38.1],
        [1659068400000, 38.32],
        [1659327600000, 38.24],
        [1659414000000, 38.52],
        [1659500400000, 37.94],
        [1659586800000, 37.83],
        [1659673200000, 38.34],
        [1659932400000, 38.1],
        [1660018800000, 38.51],
        [1660105200000, 38.4],
        [1660191600000, 38.07],
        [1660278000000, 39.12],
        [1660537200000, 38.64],
        [1660623600000, 38.89],
        [1660710000000, 38.81],
        [1660796400000, 38.61],
        [1660882800000, 38.63],
        [1661228400000, 38.99],
        [1661314800000, 38.77],
        [1661401200000, 38.34],
        [1661487600000, 38.55],
        [1661746800000, 38.11],
        [1661833200000, 38.59],
        [1661919600000, 39.6],
      ],
    },
  ];
  const [options, setOptions] = useState<ApexOptions>({
    chart: {
      id: "chart",
      fontFamily: "'Poppins', sans-serif",
      foreColor: "#A4A8AB",
      toolbar: {
        autoSelected: undefined,
        show: false,
      },
    },
    fill: {
      type: "gradient",
      gradient: {
        shadeIntensity: 1,
        opacityFrom: 0.5,
        opacityTo: 0,
      },
    },
    grid: {
      borderColor: "#232c3899",
    },
    markers: {
      size: 0,
      colors: ["#0CAF60"],
      strokeWidth: 3,
    },
    tooltip: {
      theme: "dark",
      style: {
        fontSize: "16px",
      },
      x: {
        format: "MMM dd, yyyy",
      },
      y: {
        formatter: function (val) {
          return "$" + val;
        },
      },
    },
    colors: ["#0caf6080"],
    xaxis: {
      type: "datetime",
      tickAmount: 6,
      axisBorder: {
        show: false,
      },
      axisTicks: {
        show: false,
      },
    },
    dataLabels: {
      enabled: false,
    },
    stroke: {
      width: 3,
    },
  });
  const [period, setPeriod] = useState("all");

  function updateTimeline(timeline: string) {
    setPeriod(timeline);
    switch (timeline) {
      case "1m":
        setOptions({
          ...options,
          xaxis: {
            min: new Date("28 Jan 2022").getTime(),
            max: new Date("27 Feb 2022").getTime(),
          },
        });
        break;
      case "6m":
        setOptions({
          ...options,
          xaxis: {
            min: new Date("27 Sep 2021").getTime(),
            max: new Date("27 Feb 2022").getTime(),
          },
        });
        break;
      case "1y":
        setOptions({
          ...options,
          xaxis: {
            min: new Date("21 Aug 2021").getTime(),
            max: new Date("20 Aug 2022").getTime(),
          },
        });
        break;
      case "ytd":
        setOptions({
          ...options,
          xaxis: {
            min: new Date("01 Jan 2022").getTime(),
            max: new Date("27 Feb 2022").getTime(),
          },
        });

        break;
      case "all":
        setOptions({
          ...options,
          xaxis: {
            min: undefined,
            max: undefined,
          },
        });

        break;
      default:
    }
  }

  return (
    <div className="px-5 py-6">
      <div className="flex items-center justify-between mb-10">
        <h4 className="font-semibold">Portfolio Stats</h4>
        <div className="flex gap-3">
          {periods.map((e) => (
            <button
              onClick={() => updateTimeline(e.value)}
              key={e.value}
              className={classNames(
                "text-xs border border-gray-600 rounded-xl w-10 py-2",
                e.value === period ? "bg-primary" : "bg-transparent hover:bg-gray-600"
              )}
            >
              {e.name}
            </button>
          ))}
        </div>
      </div>
      <div className="">
        <ApexChart options={options} series={series} type="area" height={300} />
      </div>
    </div>
  );
};
